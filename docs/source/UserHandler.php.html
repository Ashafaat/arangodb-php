<html>
    <head>
        <script
            type="text/javascript"
            src="../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php

/**
 * ArangoDB PHP client: user document handler
 *
 * @package   triagens\ArangoDb
 * @author    Frank Mayer
 * @since     1.2
 */

namespace triagens\ArangoDb;

/**
 * A user-document handler that fetches vertices from the server and
 * persists them on the server. It does so by issuing the
 * appropriate HTTP requests to the server.
 *
 * @package   triagens\ArangoDb
 * @since     1.2
 */
class UserHandler extends
    Handler
{

    /**
     * save an user to the user-collection
     *
     * This will save the user to the user-collection
     *
     * This will throw if the user cannot be saved
     *
     * @throws Exception
     *
     * @param mixed $username     - The name of the user as a string. This is mandatory.
     * @param mixed $passwd       - The user password as a string. If no password is specified, the empty string will be used.
     * @param mixed $active       - an optional flag that specifies whether the user is active. If not specified, this will default to true.
     * @param array $extra        - an optional array with arbitrary extra data about the user.
     * @param array $options      - an array of options
     * &lt;p&gt;Options are :&lt;br&gt;
     * &lt;/p&gt;
     *
     * @return boolean - true, if user could be saved
     * @since 1.2
     */
    public function addUser($username, $passwd = null, $active = null, $extra = null, $options = array())
    {
        $userDocument           = new User();
        $userDocument-&gt;username = $username;
        $userDocument-&gt;passwd   = $passwd;
        $userDocument-&gt;active   = $active;
        $userDocument-&gt;extra    = $extra;
        $data                   = $userDocument-&gt;getAll();

        $this-&gt;getConnection()-&gt;post(Urls::URL_USER, $this-&gt;json_encode_wrapper($data));

        return true;
    }


    /**
     * Replace an existing User, identified by its username
     *
     * This will replace the user-document on the server
     *
     * This will throw if the document cannot be Replaced
     *
     * @throws Exception
     *
     * @param mixed $username     - The name of the user as a string, who's user-data is going to be replaced. This is mandatory.
     * @param mixed $passwd       - The user password as a string. If no password is specified, the empty string will be used.
     * @param mixed $active       - an optional flag that specifies whether the user is active. If not specified, this will default to true.
     * @param array $extra        - an optional array with arbitrary extra data about the user.
     * @param array $options      - an array of options
     * &lt;p&gt;Options are :
     * &lt;/p&gt;
     *
     * @return bool - always true, will throw if there is an error
     */
    public function replaceUser($username, $passwd = null, $active = null, $extra = null, $options = array())
    {
        $userDocument         = new User();
        $userDocument-&gt;passwd = $passwd;
        $userDocument-&gt;active = $active;
        $userDocument-&gt;extra  = $extra;
        $data                 = $userDocument-&gt;getAll();
        $url                  = UrlHelper::buildUrl(Urls::URL_USER, array($username));
        $this-&gt;getConnection()-&gt;put($url, $this-&gt;json_encode_wrapper($data));

        return true;
    }


    /**
     * Update an existing user, identified by the username
     *
     * This will update the user-document on the server
     *
     * This will throw if the document cannot be updated
     *
     * @throws Exception
     *
     * @param mixed $username     - The name of the user as a string, who's user-data is going to be updated. This is mandatory.
     * @param mixed $passwd       - The user password as a string. If no password is specified, the empty string will be used.
     * @param mixed $active       - an optional flag that specifies whether the user is active. If not specified, this will default to true.
     * @param array $extra        - an optional array with arbitrary extra data about the user.
     * @param array $options      - an array of options
     * &lt;p&gt;Options are :
     * &lt;/p&gt;
     *
     * @return bool - always true, will throw if there is an error
     */
    public function updateUser($username, $passwd = null, $active = null, $extra = null, $options = array())
    {
        $userDocument         = new User();
        $userDocument-&gt;active = $active;
        if (!is_null($passwd)) {
            $userDocument-&gt;passwd = $passwd;
        }
        if (!is_null($active)) {
            $userDocument-&gt;active = $active;
        }
        if (!is_null($extra)) {
            $userDocument-&gt;extra = $extra;
        }

        $url = UrlHelper::buildUrl(Urls::URL_USER, array($username));
        $this-&gt;getConnection()-&gt;patch($url, $this-&gt;json_encode_wrapper($userDocument-&gt;getAll()));

        return true;
    }


    /**
     * Get a single user-document, identified by the username
     *
     * This will throw if the document cannot be fetched from the server
     *
     * @throws Exception
     *
     * @param mixed $username - username as a string
     *
     * @return User - the user-document fetched from the server
     */
    public function get($username)
    {
        $url      = UrlHelper::buildUrl(Urls::URL_USER, array($username));
        $response = $this-&gt;getConnection()-&gt;get($url);

        $data = $response-&gt;getJson();

        $options = array('_isNew' =&gt; false);

        return User::createFromArray($data, $options);
    }


    /**
     * Remove a user, identified by the username
     *
     * @throws Exception
     *
     * @param mixed $username - username as a string, of the user that is to be deleted
     *
     * @return bool - always true, will throw if there is an error
     */
    public function removeUser($username)
    {
        // This preserves compatibility for the old policy parameter.
        $params = array();

        $url = UrlHelper::buildUrl(Urls::URL_USER, array($username));
        $url = UrlHelper::appendParamsUrl($url, $params);
        $this-&gt;getConnection()-&gt;delete($url);

        return true;
    }
}
</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all()
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>